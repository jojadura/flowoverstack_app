<div class="container">
	<div class="row">
		<div class="col-sm-8">
			
			
            <% if signed_in? %>
                <% if @question.votes.exists?(user_id: current_user.id) %>
                    <%= link_to "Anular", question_votes_del_path(@question), method: :delete %>                    
                <% else %>
                    <%= link_to "Votar", question_votes_path(@question), method: :post %>
                <% end %>
            <% end %> 


			<h1><%= @question.title %></h1>
			<p><%= @question.body %></p>

            <% @question.comments.each do |question| %>
            	<hr>
            	<%= markdown(question.body) %>
            <% end %>


            <% if signed_in? %>
                <% if @comment.errors.any? %>
                    <div class="alert alert-danger">
                        <ul>
                            <% @comment.errors.full_messages.each do |msg| %>
                                <li><%= msg %></li>
                            <% end %>
                        </ul>
                    </div>
                <% end %>            
                <%= form_for [@question, @comment] do |f| %>
                    <div class="form-group">
                        <%=  f.text_area :body, class: "form-control input-lg", placeholder: "Comentar Pregunta" %>
                    </div>
                    <div>
                        <%= f.submit "Comentar", class: "btn btn-primary" %>
                        <%= f.hidden_field :user_id, :value => current_user.id%>
                    </div>  
                <% end %> 
            <% end %> 

            <h3><%= @question.answers.count %> Respuesta(s)</h3>
            <% @question.answers.each do |answer| %>
            	<hr>
                <%= answer.body %>
                <%= link_to "Votar", votes_answer_path(answer), method: :post %>
                <%= form_for [@question, @answer] do |f| %>
                    <div class="comment">
                        <%=  f.text_area :body, class: "form-control input-lg", placeholder: "Comentar Respuesta" %>
                    </div>
                    <div class="comment">
                        <%= f.submit "Comentar Respuesta", class: "btn btn-primary" %>
                        <%= f.hidden_field :user_id, :value => current_user.id%>
                    </div>  
                <% end %>                 
            <% end %>

            <% if signed_in? %>
                <br>
	            <h3>Tu Respuesta</h3>
                <%= form_for [@question, @answer] do |f| %>
                    <div>
                        <%=  f.text_area :body, class: "form-control input-lg" %>
                    </div>
                    <br>
                    <div>
                        <%= f.submit "Enviar Respuesta", class: "btn btn-primary" %>
                        <%= f.hidden_field :user_id, :value => current_user.id%>
                    </div>  
                <% end %> 
            <% end %>            
		</div><!--.col -->
	</div> <!--.row -->
</div> <!--.container -->